{"version":3,"names":[],"mappings":"","sources":["controllers/fm-register-controller/fm-register-controller.js"],"sourcesContent":["(function () {\r\n  'use strict';\r\n\r\n  // Setup routing.\r\n  angular.module('fm').config(['$stateProvider', function ($stateProvider) {\r\n\r\n    $stateProvider\r\n      .state('Skapa Konto', {\r\n        url: '/Skapa Konto',\r\n        controller: 'FmRegisterCtrl',\r\n        controllerAs: 'fmRegister',\r\n        templateUrl: 'views/fm-register-view.html',\r\n        resolve: {\r\n          $title: function () {\r\n            return 'Skapa Konto';\r\n          },\r\n        },\r\n        sortOrder: 4\r\n      });\r\n\r\n  }]);\r\n\r\n  // Register controller.\r\n  angular.module('fm').controller('FmRegisterCtrl', ['$http', 'fmConfig', 'fmAuthtokenFactory', FmRegisterCtrl]);\r\n\r\n  // Constuctor function.\r\n  function FmRegisterCtrl($http, fmConfig, fmAuthtokenFactory) {\r\n\r\n    /* jshint validthis: true */\r\n    var vm = this;\r\n\r\n    vm.submit = function () {\r\n\r\n      var url = fmConfig.node.url + ':' + fmConfig.node.port + '/register';\r\n\r\n      var user = {\r\n        name: vm.name,\r\n        password: vm.password\r\n      };\r\n\r\n      $http.post(url, user).then(onSuccess, onError);\r\n\r\n      function onSuccess(res) {\r\n        fmAuthtokenFactory.setToken(res.data.token);\r\n        //deferred.resolve(res);\r\n      }\r\n\r\n      function onError(res) {\r\n        console.log(res);\r\n      }\r\n\r\n    };\r\n\r\n  }\r\n\r\n})();\r\n"],"file":"controllers/fm-register-controller/fm-register-controller.js","sourceRoot":"/source/"}