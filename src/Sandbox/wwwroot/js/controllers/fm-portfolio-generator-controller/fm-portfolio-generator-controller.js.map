{"version":3,"names":[],"mappings":"","sources":["controllers/fm-portfolio-generator-controller/fm-portfolio-generator-controller.js"],"sourcesContent":["(function () {\r\n  'use strict';\r\n\r\n  // Setup routing.\r\n  angular.module('fm').config(['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider) {\r\n\r\n    $urlRouterProvider.when('/portfolio', '/portfolio/user_details');\r\n\r\n    $stateProvider\r\n      .state('portfolio', {\r\n        url: '/portfolio',\r\n        controller: 'FmPortfolioGeneratorCtrl',\r\n        controllerAs: 'fmPortfolio',\r\n        templateUrl: 'views/fm-portfolio-generator-view.html',\r\n        resolve: {\r\n          $title: function () {\r\n            return 'Portfölj';\r\n          }\r\n        },\r\n        sortOrder: 4\r\n      })\r\n\r\n     .state('portfolio.userdetails', {\r\n       url: '/user_details',\r\n       templateUrl: 'views/fm-portfolio-generator-userdetails-view.html'\r\n     })\r\n\r\n     .state('portfolio.fundpackage', {\r\n       url: '/select_fundpackage',\r\n       templateUrl: 'views/fm-portfolio-generator-fundpackage-view.html'\r\n     })\r\n\r\n     .state('portfolio.configure', {\r\n       url: '/configure_fundpackage',\r\n       templateUrl: 'views/fm-portfolio-generator-configure-view.html'\r\n     })\r\n\r\n     .state('portfolio.confirm', {\r\n       url: '/confirm',\r\n       templateUrl: 'views/fm-portfolio-generator-confirm-view.html'\r\n     });\r\n\r\n  }]);\r\n\r\n  // Register controller.\r\n  angular.module('fm').controller('FmPortfolioGeneratorCtrl', ['$state', FmPortfolioGeneratorCtrl]);\r\n\r\n  // Define controller-function.\r\n  function FmPortfolioGeneratorCtrl($state) {\r\n\r\n    /* jshint validthis: true */\r\n    var vm = this;\r\n\r\n    vm.steps = {\r\n      totalSteps: [{ stepTitle: 'Ange uppgifter' }, { stepTitle: 'Välj fondpaket' }, { stepTitle: 'Välj vad du vill göra' }, { stepTitle: 'Skapa portfölj' }],\r\n      currentStep: 1,\r\n      changeCurrentStep: function (step) {\r\n        vm.steps.currentStep = (step <= vm.steps.totalSteps.length && step > 0) ? step : vm.steps.currentStep;\r\n      }\r\n    };\r\n\r\n    vm.formData = {};\r\n\r\n    vm.preventNonNumbers = function ($event) {\r\n      var permittedKeys = [8, 16, 46, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106];\r\n\r\n      if (_.contains(permittedKeys, $event.keyCode)) {\r\n        return;\r\n      }\r\n \r\n      $event.preventDefault();\r\n    }\r\n\r\n    vm.states = {\r\n      userDetails: {\r\n        init: function () {\r\n          vm.steps.changeCurrentStep(1);\r\n        }\r\n      },\r\n      fundPackage: {\r\n        init: function () {\r\n          vm.steps.changeCurrentStep(2);\r\n          initChart();\r\n        }\r\n      },\r\n      configure: {\r\n        init: function () {\r\n          vm.steps.changeCurrentStep(3);\r\n        }\r\n      },\r\n      confirm: {\r\n        init: function () {\r\n          vm.steps.changeCurrentStep(4);\r\n        }\r\n      },\r\n      go: function (state) {\r\n        $state.go(state);\r\n      }\r\n    };\r\n\r\n    vm.userData = {\r\n      age: {\r\n        value: undefined,\r\n        errorMessage: undefined\r\n      },\r\n      income: {\r\n        value: undefined,\r\n        errorMessage: undefined\r\n      }\r\n    };\r\n\r\n    vm.validateAge = function () {\r\n\r\n      var age = parseInt(vm.userData.age.value);\r\n      vm.userData.age.errorMessage = undefined;\r\n      \r\n      if (age < 18) {\r\n        vm.userData.age.errorMessage = 'Du måste vara minst 18 år gammal';\r\n      }\r\n\r\n      if (!age) {\r\n        vm.userData.age.errorMessage = 'Vänligen ange ålder';\r\n      }\r\n    };\r\n\r\n    vm.validateIncome = function () {\r\n\r\n      var income = parseInt(vm.userData.income.value);\r\n      vm.userData.income.errorMessage = undefined;\r\n\r\n      if (!income) {\r\n        vm.userData.income.errorMessage = 'Vänligen ange inkomst';\r\n      }\r\n    };\r\n\r\n\r\n    vm.disclaimer = {\r\n      title: '',\r\n      text: 'Fondpaketen utgör inte investeringsrådgivning och tar således inte hänsyn till din riskprofil, din ekonomi eller din förväntan på avkastning. Vi kan därav inte ta ansvar för att de fonder du väljer passar dig och din investeringsprofil.'\r\n      };\r\n\r\n\r\n    \r\n    // Theme\r\n    Highcharts.theme = {\r\n      colors: ['#DF574B', '#2ABBAE', '#22968b', '#7fd6ce']\r\n    };\r\n    // Theme:end\r\n    Highcharts.setOptions(Highcharts.theme);\r\n\r\n    var chartOptions = {\r\n      chart: {\r\n        plotBackgroundColor: null,\r\n        plotBorderWidth: null,\r\n        plotShadow: false,\r\n        type: 'pie'\r\n      },\r\n      credits: {\r\n        enabled: false\r\n      },\r\n      exporting: {\r\n        enabled: false\r\n      },\r\n      title: {\r\n        text: null\r\n      },\r\n      tooltip: {\r\n        pointFormat: null\r\n      },\r\n      plotOptions: {\r\n        pie: {\r\n          allowPointSelect: true,\r\n          borderWidth: 0,\r\n          cursor: 'pointer',\r\n          innerSize: '30%',\r\n          dataLabels: {\r\n            enabled: false,\r\n          }\r\n        }\r\n      },\r\n      series: [{\r\n        name: 'Brands',\r\n        colorByPoint: true,\r\n        data: [{\r\n          name: null,\r\n          y: 18.00\r\n        }, {\r\n          name: null,\r\n          y: 42.00\r\n        }, {\r\n          name: null,\r\n          y: 15.00\r\n        }, {\r\n          name: null,\r\n          y: 25.00\r\n        }]\r\n      }]\r\n    };\r\n\r\n    function initChart() {\r\n      var chart = $('#chart');\r\n      chart.highcharts(chartOptions);\r\n      \r\n    }\r\n \r\n  }\r\n\r\n})();\r\n"],"file":"controllers/fm-portfolio-generator-controller/fm-portfolio-generator-controller.js","sourceRoot":"/source/"}