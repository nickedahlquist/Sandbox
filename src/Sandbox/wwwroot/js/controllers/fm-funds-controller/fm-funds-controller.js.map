{"version":3,"names":[],"mappings":"","sources":["controllers/fm-funds-controller/fm-funds-controller.js"],"sourcesContent":["(function () {\r\n  'use strict';\r\n\r\n  // Setup routing.\r\n  angular.module('fm').config(['$stateProvider', function ($stateProvider) {\r\n\r\n    $stateProvider\r\n      .state('fund-overwiew', {\r\n        url: '/fund-overwiew',\r\n        controller: 'FmFundsCtrl',\r\n        controllerAs: 'fmFunds',\r\n        templateUrl: 'views/fm-funds-view.html',\r\n        resolve: {\r\n          $title: function () {\r\n            return 'Fonder';\r\n          },\r\n          allData: function (fmDataService) {\r\n            return fmDataService;\r\n          },\r\n          fundData: function (fmFundDataService) {\r\n            return fmFundDataService.getFunds();\r\n            //return fmFundDataService.getResultsPage(1);\r\n          }\r\n        },\r\n        sortOrder: 3\r\n     });\r\n\r\n  }]);\r\n\r\n  // Register controller.\r\n  angular.module('fm').controller('FmFundsCtrl', ['allData', 'fundData', 'fmFundDataService', 'fmUtilityFunctions', FmFundsCtrl]);\r\n\r\n  // Define controller-function.\r\n  function FmFundsCtrl(allData, fundData, fmFundDataService, fmUtilityFunctions) {\r\n\r\n    /* jshint validthis: true */\r\n    var vm = this;\r\n\r\n    vm.cardMode = true;\r\n    vm.fundData = allData.funds;\r\n    vm.realFundData = fundData.value;\r\n    vm.busy = false;\r\n\r\n    var nextItems = fundData[\"@odata.nextLink\"];\r\n\r\n    /*\r\n    vm.funds = [];\r\n    vm.totalFunds = fundData[\"@odata.count\"] - 10;\r\n    vm.fundsPerPage = 10;\r\n    vm.clickable = true;\r\n\r\n    vm.pagination = {\r\n      current: 1\r\n    };*/\r\n\r\n    /*vm.pageChanged = function (newPage) {\r\n\r\n      fmFundDataService.getResultsPage(newPage).then(function (data) {\r\n          vm.realFundData = data.value;\r\n          return;\r\n        });\r\n    };*/\r\n\r\n    /*\r\n    vm.pageChanged = _.debounce(function (newPage) {\r\n      fmFundDataService.getResultsPage(newPage).then(function (data) {\r\n        vm.realFundData = data.value;\r\n        vm.pagination.current = newPage;\r\n        console.log(vm.pagination.current);\r\n        return;\r\n      });\r\n    }, 500, true);*/\r\n\r\n    //vm.loadMore = _.debounce(function () {\r\n    //    fmFundDataService.getNextLinks(nextItems).then(function (data) {\r\n    //      vm.realFundData = vm.realFundData.concat(data.value);\r\n    //      nextItems = data[\"@odata.nextLink\"];\r\n    //      return;\r\n    //    });\r\n    //}, 500, true);\r\n\r\n    vm.loadMore = function () {\r\n\r\n      if (vm.busy) {\r\n        return;\r\n      }\r\n\r\n      vm.busy = true;\r\n\r\n      return fmFundDataService.getNextLinks(nextItems).then(function (data) {\r\n        vm.realFundData = vm.realFundData.concat(data.value);\r\n        nextItems = data[\"@odata.nextLink\"];\r\n        vm.busy = false;\r\n        return;\r\n      });\r\n\r\n    };\r\n\r\n    vm.getNumber = fmUtilityFunctions.intToArray;\r\n\r\n    vm.toggleCardMode = function () {\r\n      vm.cardMode = !vm.cardMode;\r\n    };\r\n\r\n  }\r\n\r\n})();"],"file":"controllers/fm-funds-controller/fm-funds-controller.js","sourceRoot":"/source/"}