{"version":3,"names":[],"mappings":"","sources":["controllers/fm-news-controller/fm-news-controller.js"],"sourcesContent":["(function () {\r\n  'use strict';\r\n\r\n  // Setup routing.\r\n  angular.module('fm').config(['$stateProvider', function ($stateProvider) {\r\n\r\n    $stateProvider\r\n\r\n      .state('news', {\r\n        url: '/news',\r\n        controller: 'FmNewsCtrl',\r\n        controllerAs: 'fmNews',\r\n        resolve: {\r\n          $title: function () {\r\n            return 'Nyheter';\r\n          },\r\n          newsData: function (fmNewsService) {\r\n            return fmNewsService.getNews();\r\n          }\r\n        },\r\n        templateUrl: 'views/fm-news-view.html',\r\n      })\r\n      .state('news.article', {\r\n        url: '/article',\r\n        resolve: {\r\n          $title: function () {\r\n            return 'Artikel';\r\n          }\r\n        },\r\n        templateUrl: 'views/fm-single-newspost-view.html',\r\n      });\r\n\r\n  }]);\r\n\r\n  // Register controller.\r\n  angular.module('fm').controller('FmNewsCtrl', ['newsData', '$sanitize', 'fmUtilityFunctions', FmNewsCtrl]);\r\n\r\n  // Define controller-function.\r\n  function FmNewsCtrl(newsData, $sanitize, fmUtilityFunctions) {\r\n\r\n    /* jshint validthis: true */\r\n    var vm = this;\r\n    var utils = fmUtilityFunctions;\r\n\r\n    vm.newsItems = newsData;\r\n\r\n    for (var key in vm.newsItems) {\r\n      vm.newsItems[key].TextExcerpt = $sanitize(fmUtilityFunctions.truncateText(300, vm.newsItems[key].NewsText.split('<br/>')[0]));\r\n      vm.newsItems[key].SignatureExcerpt = $sanitize(vm.newsItems[key].Signature.split('<br/>')[0]);\r\n      vm.newsItems[key].NewsText = $sanitize(vm.newsItems[key].NewsText);\r\n    }\r\n\r\n    console.log(vm.newsItems);\r\n\r\n  }\r\n\r\n})();\r\n"],"file":"controllers/fm-news-controller/fm-news-controller.js","sourceRoot":"/source/"}